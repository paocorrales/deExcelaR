<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Manipulación de datos ordenados usando {dplyr} - Primera parte</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<script src="site_libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">de Excel a R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="hoja-de-ruta.html">Hoja de ruta</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Temas
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="01-introduccion.html">Introducción</a>
    </li>
    <li>
      <a href="02-proyectos.html">Proyectos</a>
    </li>
    <li>
      <a href="03-reportes-I.html">Reportes I</a>
    </li>
    <li>
      <a href="04-lectura-datos.html">Lectura de datos</a>
    </li>
    <li>
      <a href="05-dplyr-I.html">Maninupulación de datos I</a>
    </li>
    <li>
      <a href="06-graficos-I.html">Gráficos I</a>
    </li>
    <li>
      <a href="07-graficos-II.html">Gráficos II</a>
    </li>
    <li>
      <a href="08-dplyr-tidyr-II.html">Manipulación de datos II</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Desafíos
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="desafio-1.html">Leer datos</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Código</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Descargar Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Manipulación de datos ordenados usando {dplyr} - Primera parte</h1>

</div>


<p>El paquete {dplyr} provee una enorme cantidad de funciones útiles para manipular y analizar datos de manera intuitiva y expresiva.</p>
<p>El espíritu detrás de {dplyr} es que la enorme mayoría de los análisis, por más complicados que sean, involucran combinar y encadenar una serie relativamente acotada de acciones. En este curso vamos a centrarnos las cinco más comunes:</p>
<ul>
<li><code>select()</code>: selecciona columnas de una tabla.</li>
<li><code>filter()</code>: selecciona filas de una tabla a partir de una o más condiciones lógicas.</li>
<li><code>group_by()</code>: agrupa una tabla en base al valor de una o más columnas.</li>
<li><code>mutate()</code>: agrega nuevas columnas a una tabla.</li>
<li><code>summarise()</code>: calcula estadísticas para cada grupo de una tabla.</li>
</ul>
<div class="alert alert-success">
<p><strong>dplyr y tablas dinámicas:</strong></p>
<p>A grosso modo, las operaciones de {dplyr} permiten hacer en R lo que se hace en tablas dinámicas (pivot tables) en Excel. <code>filter()</code> vendría a ser como la sección de “Filtros”, <code>group_by()</code>, la sección de “Filas”, <code>select()</code>, la sección de “Columnas” y <code>summarise()</code>, la parte de “Valores”.</p>
</div>
<p>Una elemento importante de {dplyr} es el operador ‘pipe’ (<code>%&gt;%</code>) que agarra el resultado de una función y se lo pasa a la siguiente. Esto permite escribir el código como una cadena de funciones que van operando sobre el resultado de la anterior.</p>
<div class="alert alert-info">
<p><strong>Primer desafío:</strong></p>
<p>Te dieron una tabla con datos de temperatura mínima y máxima para distintas estaciones meteorológicas de todo el país durante los 365 días de un año. Las columnas son: id_estacion, temperatura_maxima, temperatura_minima y provincia. En base a esos datos, te piden que computen la temperatura media anual de cada estación únicamente de las estaciones de La Pampa.</p>
<p>¿En qué orden ejecutarías estos pasos para obtener el resultado deseado?</p>
<ul>
<li>usar <code>summarise()</code> para calcular la estadística <code>mean(temperatura_media)</code> para cada <code>id_estacion</code></li>
<li>usar <code>group_by()</code> para agrupar por la columna <code>id_estacion</code></li>
<li>usar <code>mutate()</code> para agregar una columna llamada <code>temperatura_media</code> que sea <code>(temperatura_minima + temperatura_maxima)/2</code>.</li>
<li>usar <code>filter()</code> para seleccionar solo las filas donde la columnas <code>provincia</code> es igual a “La Pampa”</li>
</ul>
</div>
<p>Para usar {dplyr} primero hay que instalarlo (esto hay que hacerlo una sola vez) con el comando:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">install.packages</span>(<span class="st">&#39;dplyr&#39;</span>)</span></code></pre></div>
<p>y luego cargarlo en memoria con</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">library</span>(dplyr)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<p>Volvé a cargar los datos de países (para un recordatorio, podés ir a <a href="04-lectura-datos.html">Lectura de datos ordenados</a>):</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw">library</span>(readr)</span>
<span id="cb6-2"><a href="#cb6-2"></a>paises &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;datos/paises.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   pais = col_character(),
##   continente = col_character(),
##   anio = col_double(),
##   esperanza_de_vida = col_double(),
##   poblacion = col_double(),
##   pib_per_capita = col_double()
## )</code></pre>
<div id="seleccionando-columnas-con-select" class="section level2">
<h2>Seleccionando columnas con <code>select()</code></h2>
<p>Para quedarse únicamente con las columnas de año, país y PBI per cápita, usá <code>select()</code></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">select</span>(paises, anio, pais, pib_per_capita)</span></code></pre></div>
<pre><code>## # A tibble: 1,704 x 3
##     anio pais       pib_per_capita
##    &lt;dbl&gt; &lt;chr&gt;               &lt;dbl&gt;
##  1  1952 Afganistán           779.
##  2  1957 Afganistán           821.
##  3  1962 Afganistán           853.
##  4  1967 Afganistán           836.
##  5  1972 Afganistán           740.
##  6  1977 Afganistán           786.
##  7  1982 Afganistán           978.
##  8  1987 Afganistán           852.
##  9  1992 Afganistán           649.
## 10  1997 Afganistán           635.
## # … with 1,694 more rows</code></pre>
<p>¿Dónde quedó este resultado? Si te fijás en la variable <code>paises</code>, ésta está intacta:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>paises</span></code></pre></div>
<pre><code>## # A tibble: 1,704 x 6
##    pais       continente  anio esperanza_de_vida poblacion pib_per_capita
##    &lt;chr&gt;      &lt;chr&gt;      &lt;dbl&gt;             &lt;dbl&gt;     &lt;dbl&gt;          &lt;dbl&gt;
##  1 Afganistán Asia        1952              28.8   8425333           779.
##  2 Afganistán Asia        1957              30.3   9240934           821.
##  3 Afganistán Asia        1962              32.0  10267083           853.
##  4 Afganistán Asia        1967              34.0  11537966           836.
##  5 Afganistán Asia        1972              36.1  13079460           740.
##  6 Afganistán Asia        1977              38.4  14880372           786.
##  7 Afganistán Asia        1982              39.9  12881816           978.
##  8 Afganistán Asia        1987              40.8  13867957           852.
##  9 Afganistán Asia        1992              41.7  16317921           649.
## 10 Afganistán Asia        1997              41.8  22227415           635.
## # … with 1,694 more rows</code></pre>
<p><code>select()</code> y el resto de las funciones de {dplyr} siempre generan una nueva tabla y nunca modifican la tabla original. Para guardar la tabla con las tres columnas <code>anio</code>, <code>pais</code> y <code>pbi_per_capita</code> tenés que asignar el resultado a una variable.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>anio_pais_pbi &lt;-<span class="st"> </span><span class="kw">select</span>(paises, anio, pais, pib_per_capita)</span>
<span id="cb12-2"><a href="#cb12-2"></a>anio_pais_pbi</span></code></pre></div>
<pre><code>## # A tibble: 1,704 x 3
##     anio pais       pib_per_capita
##    &lt;dbl&gt; &lt;chr&gt;               &lt;dbl&gt;
##  1  1952 Afganistán           779.
##  2  1957 Afganistán           821.
##  3  1962 Afganistán           853.
##  4  1967 Afganistán           836.
##  5  1972 Afganistán           740.
##  6  1977 Afganistán           786.
##  7  1982 Afganistán           978.
##  8  1987 Afganistán           852.
##  9  1992 Afganistán           649.
## 10  1997 Afganistán           635.
## # … with 1,694 more rows</code></pre>
<div class="figure">
<img src="img/dplyr-select.png" alt="" />
<p class="caption">Cómo funciona <code>select()</code></p>
</div>
</div>
<div id="filtrando-filas-con-filter" class="section level2">
<h2>Filtrando filas con <code>filter()</code></h2>
<p>Ahora podés usar <code>filter()</code> para quedarte con sólo unas filas. Por ejemplo, para ver los datos de Argentina:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="kw">filter</span>(anio_pais_pbi, pais <span class="op">==</span><span class="st"> &quot;Argentina&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 12 x 3
##     anio pais      pib_per_capita
##    &lt;dbl&gt; &lt;chr&gt;              &lt;dbl&gt;
##  1  1952 Argentina          5911.
##  2  1957 Argentina          6857.
##  3  1962 Argentina          7133.
##  4  1967 Argentina          8053.
##  5  1972 Argentina          9443.
##  6  1977 Argentina         10079.
##  7  1982 Argentina          8998.
##  8  1987 Argentina          9140.
##  9  1992 Argentina          9308.
## 10  1997 Argentina         10967.
## 11  2002 Argentina          8798.
## 12  2007 Argentina         12779.</code></pre>
<p>La mayoría de los análisis consisten en varios pasos (en el primer desafío usaste 4 pasos para calcular las temperaturas medias de una serie de estaciones). La única tabla que te interesa es la última, por lo que ir asignando variables nuevas en cada paso intermedio es tedioso y poco práctico. Para eso se usa el operador ‘pipe’ (<code>%&gt;%</code>).</p>
<p>Las dos operaciones anteriores (seleccionar tres columnas y luego filtar las filas correspondientes a Argentina) se pueden escribir uno después del otro y sin asignaciones intermedias de esta forma:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>paises <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="st">  </span><span class="kw">select</span>(anio, pais, pib_per_capita) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="st">  </span><span class="kw">filter</span>(pais <span class="op">==</span><span class="st"> &quot;Argentina&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 12 x 3
##     anio pais      pib_per_capita
##    &lt;dbl&gt; &lt;chr&gt;              &lt;dbl&gt;
##  1  1952 Argentina          5911.
##  2  1957 Argentina          6857.
##  3  1962 Argentina          7133.
##  4  1967 Argentina          8053.
##  5  1972 Argentina          9443.
##  6  1977 Argentina         10079.
##  7  1982 Argentina          8998.
##  8  1987 Argentina          9140.
##  9  1992 Argentina          9308.
## 10  1997 Argentina         10967.
## 11  2002 Argentina          8798.
## 12  2007 Argentina         12779.</code></pre>
<p>La forma de “leer” esto es “Tomá la variable <code>paises</code>, <strong>después</strong> aplicale <code>select(anio, pais, pib_per_capita)</code>, <strong>después</strong> aplicale <code>filter(pais == "Argentina")</code>”.</p>
<div class="alert alert-success">
<p><strong>Tip:</strong></p>
<p>En RStudio podés escribir <code>%&gt;%</code> usando el atajo de teclado Ctr + Shift M. ¡Probalo!</p>
</div>
<div class="alert alert-info">
<p><strong>Desafío:</strong></p>
<p>Completá esta cadena para producir una tabla que contenga los valores de expectativa de vida, pais y año únicamente para los países africanos.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>paises <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="st">  </span><span class="kw">filter</span>(continente <span class="op">==</span><span class="st"> </span>___) <span class="op">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="st">  </span><span class="kw">select</span>(___, ___, ___)</span></code></pre></div>
</div>
</div>
<div id="agrupando-y-reduciendo-con-group_by-summarise" class="section level2">
<h2>Agrupando y reduciendo con <code>group_by() %&gt;% summarise()</code></h2>
<p>Si querés calcular la expectativa de vida media para cada continente, tenés que usar el combo <code>group_by() %&gt;% summarise()</code>. Es decir, primero agrupar la tabla según la columna continente y luego calcular un promedio para cada grupo.</p>
<p>Para agrupar la tabla paises según el continente usamos el siguiente código:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>paises <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="st">  </span><span class="kw">group_by</span>(continente) </span></code></pre></div>
<pre><code>## # A tibble: 1,704 x 6
## # Groups:   continente [5]
##    pais       continente  anio esperanza_de_vida poblacion pib_per_capita
##    &lt;chr&gt;      &lt;chr&gt;      &lt;dbl&gt;             &lt;dbl&gt;     &lt;dbl&gt;          &lt;dbl&gt;
##  1 Afganistán Asia        1952              28.8   8425333           779.
##  2 Afganistán Asia        1957              30.3   9240934           821.
##  3 Afganistán Asia        1962              32.0  10267083           853.
##  4 Afganistán Asia        1967              34.0  11537966           836.
##  5 Afganistán Asia        1972              36.1  13079460           740.
##  6 Afganistán Asia        1977              38.4  14880372           786.
##  7 Afganistán Asia        1982              39.9  12881816           978.
##  8 Afganistán Asia        1987              40.8  13867957           852.
##  9 Afganistán Asia        1992              41.7  16317921           649.
## 10 Afganistán Asia        1997              41.8  22227415           635.
## # … with 1,694 more rows</code></pre>
<p>A primera vista parecería que la función no hizo nada, pero fijate que el resultado ahora dice que tiene grupos (“Groups:”), y nos dice qué columna es la que agrupa los datos (“continente”) y cuántos grupos hay (“5”). Las operaciones subsiguientes que le hagamos a esta tabla van a hacerse <em>para cada grupo</em>.</p>
<p>Para ver esto en acción, usá <code>summarise()</code> para computar el promedio de la esperanza de vida:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>paises <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="st">  </span><span class="kw">group_by</span>(continente) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">esperanza_de_vida_media =</span> <span class="kw">mean</span>(esperanza_de_vida))</span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 5 x 2
##   continente esperanza_de_vida_media
##   &lt;chr&gt;                        &lt;dbl&gt;
## 1 África                        48.9
## 2 Américas                      64.7
## 3 Asia                          60.1
## 4 Europa                        71.9
## 5 Oceanía                       74.3</code></pre>
<p>¡Tadá! <code>summarise()</code> devuelve una tabla con una columna nueva, llamada “esperanza_de_vida_media” que contiene el promedio de <code>esperanza_de_vida</code> para cada grupo. Esta operación es equivalente a esta tabla dinámica en Excel:</p>
<figure>
<video width=770px controls>
<source src="img/pivot-vid.webm" type="video/webm">
</video>
</figure>
<p><code>group_by()</code> permite agrupar en base a múltiples columnas y <code>summarise()</code> permite generar múltiples columnas de resumen. El siguiente código calcula la esperanza de vida media y su desvío estándar para cada continente y cada año.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>paises <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="st">  </span><span class="kw">group_by</span>(continente, anio) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb24-3"><a href="#cb24-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">esperanza_de_vida_media =</span> <span class="kw">mean</span>(esperanza_de_vida),</span>
<span id="cb24-4"><a href="#cb24-4"></a>            <span class="dt">esperanza_de_vida_sd =</span> <span class="kw">sd</span>(esperanza_de_vida))</span></code></pre></div>
<pre><code>## `summarise()` regrouping output by &#39;continente&#39; (override with `.groups` argument)</code></pre>
<pre><code>## # A tibble: 60 x 4
## # Groups:   continente [5]
##    continente  anio esperanza_de_vida_media esperanza_de_vida_sd
##    &lt;chr&gt;      &lt;dbl&gt;                   &lt;dbl&gt;                &lt;dbl&gt;
##  1 África      1952                    39.1                 5.15
##  2 África      1957                    41.3                 5.62
##  3 África      1962                    43.3                 5.88
##  4 África      1967                    45.3                 6.08
##  5 África      1972                    47.5                 6.42
##  6 África      1977                    49.6                 6.81
##  7 África      1982                    51.6                 7.38
##  8 África      1987                    53.3                 7.86
##  9 África      1992                    53.6                 9.46
## 10 África      1997                    53.6                 9.10
## # … with 50 more rows</code></pre>
<p>El resultado va a siempre ser una tabla con la misma cantidad de filas que grupos y una cantidad de columnas igual a la cantidad de columnas usadas para agrupar y los estadísticos computados.</p>
<div class="alert alert-info">
<p><strong>Desafío:</strong></p>
<p>¿Cuál te imaginás que va a ser el resultado del siguiente código? ¿Cuántas filas y columnas va a tener? (Tratá de pensarlo antes de correrlo.)</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>paises <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb27-2"><a href="#cb27-2"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">esperanza_de_vida_media =</span> <span class="kw">mean</span>(esperanza_de_vida))</span></code></pre></div>
</div>
<p>El combo <code>group_by() %&gt;% summarise()</code> se puede resumir en esta figura. Las filas de una tabla se dividen en grupos, y luego cada grupo se “resume” en una fila en función del estadístico usado.</p>
<p><img src="img/group_by-summarize.png" /> ## Creando nuevas columnas con <code>mutate()</code></p>
<p>Todo esto está bien para hacer cálculos con columnas previamente existentes, pero muchas veces tenés que crear nuevas columnas.</p>
<p>La tabla <code>paises</code> tiene información de PBI per cápita y de población, por lo que es posible computar el PBI de cada país multiplicando los valores de estas columnas. <code>mutate()</code> permite agregar una nueva columna llamada “pbi” con esa información:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>paises <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb28-2"><a href="#cb28-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">pbi =</span> pib_per_capita<span class="op">*</span>poblacion)</span></code></pre></div>
<pre><code>## # A tibble: 1,704 x 7
##    pais     continente  anio esperanza_de_vi… poblacion pib_per_capita       pbi
##    &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt;            &lt;dbl&gt;     &lt;dbl&gt;          &lt;dbl&gt;     &lt;dbl&gt;
##  1 Afganis… Asia        1952             28.8   8425333           779.   6.57e 9
##  2 Afganis… Asia        1957             30.3   9240934           821.   7.59e 9
##  3 Afganis… Asia        1962             32.0  10267083           853.   8.76e 9
##  4 Afganis… Asia        1967             34.0  11537966           836.   9.65e 9
##  5 Afganis… Asia        1972             36.1  13079460           740.   9.68e 9
##  6 Afganis… Asia        1977             38.4  14880372           786.   1.17e10
##  7 Afganis… Asia        1982             39.9  12881816           978.   1.26e10
##  8 Afganis… Asia        1987             40.8  13867957           852.   1.18e10
##  9 Afganis… Asia        1992             41.7  16317921           649.   1.06e10
## 10 Afganis… Asia        1997             41.8  22227415           635.   1.41e10
## # … with 1,694 more rows</code></pre>
<p>Recordá que las funciones de {dplyr} nunca modifican la tabla original. <code>mutate()</code> devolvió una nueva tabla que es igual a la tabla <code>paises</code> pero con la columna “pbi” agregada. La tabla <code>paises</code> sigue intacta.</p>
</div>
<div id="desagrupando-con-ungroup" class="section level2">
<h2>Desagrupando con <code>ungroup()</code></h2>
<p>En general, la mayoría de las funciones de {dplyr} “entienden” cuando una tabla está agrupada y realizan las operaciones para cada grupo.</p>
<div class="alert alert-info">
<p><strong>Desafío:</strong></p>
<p>¿Cuál de estos dos códigos agrega una columna llamada “pbi_continente” con el pbi promedio del continente correspondiente a cada país? ¿Qué hace el otro?</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>paises <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb30-2"><a href="#cb30-2"></a><span class="st">  </span><span class="kw">group_by</span>(continente) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb30-3"><a href="#cb30-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">pbi_continente =</span> <span class="kw">mean</span>(pib_per_capita<span class="op">*</span>poblacion)) </span>
<span id="cb30-4"><a href="#cb30-4"></a></span>
<span id="cb30-5"><a href="#cb30-5"></a>paises <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb30-6"><a href="#cb30-6"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">pbi_continente =</span> <span class="kw">mean</span>(pib_per_capita<span class="op">*</span>poblacion)) </span></code></pre></div>
</div>
<p>En otras palabras, los resultados de <code>mutate()</code>, <code>filter()</code>, <code>summarise()</code> y otras funciones cambian según si la tabla está agrupada o no. Como a veces uno se puede olvidar que quedaron grupos, es conveniente usar la función <code>ungroup()</code> una vez que dejás de trabajar con grupos:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>paises <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb31-2"><a href="#cb31-2"></a><span class="st">  </span><span class="kw">group_by</span>(continente) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb31-3"><a href="#cb31-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">pbi_continente =</span> <span class="kw">mean</span>(pib_per_capita<span class="op">*</span>poblacion)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb31-4"><a href="#cb31-4"></a><span class="st">  </span><span class="kw">ungroup</span>()</span></code></pre></div>
<pre><code>## # A tibble: 1,704 x 7
##    pais  continente  anio esperanza_de_vi… poblacion pib_per_capita
##    &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;            &lt;dbl&gt;     &lt;dbl&gt;          &lt;dbl&gt;
##  1 Afga… Asia        1952             28.8   8425333           779.
##  2 Afga… Asia        1957             30.3   9240934           821.
##  3 Afga… Asia        1962             32.0  10267083           853.
##  4 Afga… Asia        1967             34.0  11537966           836.
##  5 Afga… Asia        1972             36.1  13079460           740.
##  6 Afga… Asia        1977             38.4  14880372           786.
##  7 Afga… Asia        1982             39.9  12881816           978.
##  8 Afga… Asia        1987             40.8  13867957           852.
##  9 Afga… Asia        1992             41.7  16317921           649.
## 10 Afga… Asia        1997             41.8  22227415           635.
## # … with 1,694 more rows, and 1 more variable: pbi_continente &lt;dbl&gt;</code></pre>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiTWFuaXB1bGFjacOzbiBkZSBkYXRvcyBvcmRlbmFkb3MgdXNhbmRvIHtkcGx5cn0gLSBQcmltZXJhIHBhcnRlIgpvdXRwdXQ6IAogIGh0bWxfZG9jdW1lbnQ6CiAgICBjb2RlX2Rvd25sb2FkOiB0cnVlCiAgICB0b2M6IHRydWUKICAgIHRvY19mbG9hdDogdHJ1ZQogICAgdGVtcGxhdGU6ICJfdGVtcGxhdGUuaHRtbCIKLS0tCgpgYGB7ciBzZXR1cCwgaW5jbHVkZT1GQUxTRX0Ka25pdHI6Om9wdHNfY2h1bmskc2V0KGVjaG8gPSBUUlVFKQpgYGAKCgpFbCBwYXF1ZXRlIHtkcGx5cn0gcHJvdmVlIHVuYSBlbm9ybWUgY2FudGlkYWQgZGUgZnVuY2lvbmVzIMO6dGlsZXMgcGFyYSBtYW5pcHVsYXIgeSBhbmFsaXphciBkYXRvcyBkZSBtYW5lcmEgaW50dWl0aXZhIHkgZXhwcmVzaXZhLiAKCgogCgpFbCBlc3DDrXJpdHUgZGV0csOhcyBkZSB7ZHBseXJ9IGVzIHF1ZSBsYSBlbm9ybWUgbWF5b3LDrWEgZGUgbG9zIGFuw6FsaXNpcywgcG9yIG3DoXMgY29tcGxpY2Fkb3MgcXVlIHNlYW4sIGludm9sdWNyYW4gY29tYmluYXIgeSBlbmNhZGVuYXIgdW5hIHNlcmllIHJlbGF0aXZhbWVudGUgYWNvdGFkYSBkZSBhY2Npb25lcy4gRW4gZXN0ZSBjdXJzbyB2YW1vcyBhIGNlbnRyYXJub3MgbGFzIGNpbmNvIG3DoXMgY29tdW5lczoKCiAgKiBgc2VsZWN0KClgOiBzZWxlY2Npb25hIGNvbHVtbmFzIGRlIHVuYSB0YWJsYS4KICAqIGBmaWx0ZXIoKWA6IHNlbGVjY2lvbmEgZmlsYXMgZGUgdW5hIHRhYmxhIGEgcGFydGlyIGRlIHVuYSBvIG3DoXMgY29uZGljaW9uZXMgbMOzZ2ljYXMuCiAgKiBgZ3JvdXBfYnkoKWA6IGFncnVwYSB1bmEgdGFibGEgZW4gYmFzZSBhbCB2YWxvciBkZSB1bmEgbyBtw6FzIGNvbHVtbmFzLgogICogYG11dGF0ZSgpYDogYWdyZWdhIG51ZXZhcyBjb2x1bW5hcyBhIHVuYSB0YWJsYS4KICAqIGBzdW1tYXJpc2UoKWA6IGNhbGN1bGEgZXN0YWTDrXN0aWNhcyBwYXJhIGNhZGEgZ3J1cG8gZGUgdW5hIHRhYmxhLgogIAoKOjo6IHsuYWxlcnQgLmFsZXJ0LXN1Y2Nlc3N9CioqZHBseXIgeSB0YWJsYXMgZGluw6FtaWNhczoqKgoKQSBncm9zc28gbW9kbywgbGFzIG9wZXJhY2lvbmVzIGRlIHtkcGx5cn0gcGVybWl0ZW4gaGFjZXIgZW4gUiBsbyBxdWUgc2UgaGFjZSBlbiB0YWJsYXMgZGluw6FtaWNhcyAocGl2b3QgdGFibGVzKSBlbiBFeGNlbC4gYGZpbHRlcigpYCB2ZW5kcsOtYSBhIHNlciBjb21vIGxhIHNlY2Npw7NuIGRlICJGaWx0cm9zIiwgYGdyb3VwX2J5KClgLCBsYSBzZWNjacOzbiBkZSAiRmlsYXMiLCBgc2VsZWN0KClgLCBsYSBzZWNjacOzbiBkZSAiQ29sdW1uYXMiIHkgYHN1bW1hcmlzZSgpYCwgbGEgcGFydGUgZGUgIlZhbG9yZXMiLiAKOjo6CgoKVW5hIGVsZW1lbnRvIGltcG9ydGFudGUgZGUge2RwbHlyfSBlcyBlbCBvcGVyYWRvciAncGlwZScgKGAlPiVgKSBxdWUgYWdhcnJhIGVsIHJlc3VsdGFkbyBkZSB1bmEgZnVuY2nDs24geSBzZSBsbyBwYXNhIGEgbGEgc2lndWllbnRlLiBFc3RvIHBlcm1pdGUgZXNjcmliaXIgZWwgY8OzZGlnbyBjb21vIHVuYSBjYWRlbmEgZGUgZnVuY2lvbmVzIHF1ZSB2YW4gb3BlcmFuZG8gc29icmUgZWwgcmVzdWx0YWRvIGRlIGxhIGFudGVyaW9yLgoKOjo6IHsuYWxlcnQgLmFsZXJ0LWluZm99CioqUHJpbWVyIGRlc2Fmw61vOioqCgpUZSBkaWVyb24gdW5hIHRhYmxhIGNvbiBkYXRvcyBkZSB0ZW1wZXJhdHVyYSBtw61uaW1hIHkgbcOheGltYSBwYXJhIGRpc3RpbnRhcyBlc3RhY2lvbmVzIG1ldGVvcm9sw7NnaWNhcyBkZSB0b2RvIGVsIHBhw61zIGR1cmFudGUgbG9zIDM2NSBkw61hcyBkZSB1biBhw7FvLiBMYXMgY29sdW1uYXMgc29uOiBpZF9lc3RhY2lvbiwgdGVtcGVyYXR1cmFfbWF4aW1hLCB0ZW1wZXJhdHVyYV9taW5pbWEgeSBwcm92aW5jaWEuIEVuIGJhc2UgYSBlc29zIGRhdG9zLCB0ZSBwaWRlbiBxdWUgY29tcHV0ZW4gbGEgdGVtcGVyYXR1cmEgbWVkaWEgYW51YWwgZGUgY2FkYSBlc3RhY2nDs24gw7puaWNhbWVudGUgZGUgbGFzIGVzdGFjaW9uZXMgZGUgTGEgUGFtcGEuIAoKwr9FbiBxdcOpIG9yZGVuIGVqZWN1dGFyw61hcyBlc3RvcyBwYXNvcyBwYXJhIG9idGVuZXIgZWwgcmVzdWx0YWRvIGRlc2VhZG8/CgoqIHVzYXIgYHN1bW1hcmlzZSgpYCBwYXJhIGNhbGN1bGFyIGxhIGVzdGFkw61zdGljYSBgbWVhbih0ZW1wZXJhdHVyYV9tZWRpYSlgIHBhcmEgY2FkYSBgaWRfZXN0YWNpb25gCiogdXNhciBgZ3JvdXBfYnkoKWAgcGFyYSBhZ3J1cGFyIHBvciBsYSBjb2x1bW5hIGBpZF9lc3RhY2lvbmAKKiB1c2FyIGBtdXRhdGUoKWAgcGFyYSBhZ3JlZ2FyIHVuYSBjb2x1bW5hIGxsYW1hZGEgYHRlbXBlcmF0dXJhX21lZGlhYCBxdWUgc2VhIGAodGVtcGVyYXR1cmFfbWluaW1hICsgdGVtcGVyYXR1cmFfbWF4aW1hKS8yYC4KKiB1c2FyIGBmaWx0ZXIoKWAgcGFyYSBzZWxlY2Npb25hciBzb2xvIGxhcyBmaWxhcyBkb25kZSBsYSBjb2x1bW5hcyBgcHJvdmluY2lhYCBlcyBpZ3VhbCBhICJMYSBQYW1wYSIKCjo6OgoKClBhcmEgdXNhciB7ZHBseXJ9IHByaW1lcm8gaGF5IHF1ZSBpbnN0YWxhcmxvIChlc3RvIGhheSBxdWUgaGFjZXJsbyB1bmEgc29sYSB2ZXopIGNvbiBlbCBjb21hbmRvOgoKYGBge3IsIGV2YWwgPSBGQUxTRX0KaW5zdGFsbC5wYWNrYWdlcygnZHBseXInKQpgYGAKCnkgbHVlZ28gY2FyZ2FybG8gZW4gbWVtb3JpYSBjb24KCmBgYHtyfQpsaWJyYXJ5KGRwbHlyKQpgYGAKVm9sdsOpIGEgY2FyZ2FyIGxvcyBkYXRvcyBkZSBwYcOtc2VzIChwYXJhIHVuIHJlY29yZGF0b3JpbywgcG9kw6lzIGlyIGEgW0xlY3R1cmEgZGUgZGF0b3Mgb3JkZW5hZG9zXSgwNC1sZWN0dXJhLWRhdG9zLmh0bWwpKToKCmBgYHtyfQpsaWJyYXJ5KHJlYWRyKQpwYWlzZXMgPC0gcmVhZF9jc3YoImRhdG9zL3BhaXNlcy5jc3YiKQpgYGAKIyMgU2VsZWNjaW9uYW5kbyBjb2x1bW5hcyBjb24gYHNlbGVjdCgpYAoKUGFyYSBxdWVkYXJzZSDDum5pY2FtZW50ZSBjb24gbGFzIGNvbHVtbmFzIGRlIGHDsW8sIHBhw61zIHkgUEJJIHBlciBjw6FwaXRhLCB1c8OhIGBzZWxlY3QoKWAKICAKYGBge3J9CnNlbGVjdChwYWlzZXMsIGFuaW8sIHBhaXMsIHBpYl9wZXJfY2FwaXRhKQpgYGAKCgrCv0TDs25kZSBxdWVkw7MgZXN0ZSByZXN1bHRhZG8/IFNpIHRlIGZpasOhcyBlbiBsYSB2YXJpYWJsZSBgcGFpc2VzYCwgw6lzdGEgZXN0w6EgaW50YWN0YToKCmBgYHtyfQpwYWlzZXMKYGBgCgoKYHNlbGVjdCgpYCB5IGVsIHJlc3RvIGRlIGxhcyBmdW5jaW9uZXMgZGUge2RwbHlyfSBzaWVtcHJlIGdlbmVyYW4gdW5hIG51ZXZhIHRhYmxhIHkgbnVuY2EgbW9kaWZpY2FuIGxhIHRhYmxhIG9yaWdpbmFsLiBQYXJhIGd1YXJkYXIgbGEgdGFibGEgY29uIGxhcyB0cmVzIGNvbHVtbmFzIGBhbmlvYCwgYHBhaXNgIHkgYHBiaV9wZXJfY2FwaXRhYCB0ZW7DqXMgcXVlIGFzaWduYXIgZWwgcmVzdWx0YWRvIGEgdW5hIHZhcmlhYmxlLgoKYGBge3J9CmFuaW9fcGFpc19wYmkgPC0gc2VsZWN0KHBhaXNlcywgYW5pbywgcGFpcywgcGliX3Blcl9jYXBpdGEpCmFuaW9fcGFpc19wYmkKYGBgCgoKIVtDw7NtbyBmdW5jaW9uYSBgc2VsZWN0KClgXShpbWcvZHBseXItc2VsZWN0LnBuZykKCiMjIEZpbHRyYW5kbyBmaWxhcyBjb24gYGZpbHRlcigpYAoKQWhvcmEgcG9kw6lzIHVzYXIgYGZpbHRlcigpYCBwYXJhIHF1ZWRhcnRlIGNvbiBzw7NsbyB1bmFzIGZpbGFzLiBQb3IgZWplbXBsbywgcGFyYSB2ZXIgbG9zIGRhdG9zIGRlIEFyZ2VudGluYToKCmBgYHtyfQpmaWx0ZXIoYW5pb19wYWlzX3BiaSwgcGFpcyA9PSAiQXJnZW50aW5hIikKYGBgCgpMYSBtYXlvcsOtYSBkZSBsb3MgYW7DoWxpc2lzIGNvbnNpc3RlbiBlbiB2YXJpb3MgcGFzb3MgKGVuIGVsIHByaW1lciBkZXNhZsOtbyB1c2FzdGUgNCBwYXNvcyBwYXJhIGNhbGN1bGFyIGxhcyB0ZW1wZXJhdHVyYXMgbWVkaWFzIGRlIHVuYSBzZXJpZSBkZSBlc3RhY2lvbmVzKS4gTGEgw7puaWNhIHRhYmxhIHF1ZSB0ZSBpbnRlcmVzYSBlcyBsYSDDumx0aW1hLCBwb3IgbG8gcXVlIGlyIGFzaWduYW5kbyB2YXJpYWJsZXMgbnVldmFzIGVuIGNhZGEgcGFzbyBpbnRlcm1lZGlvIGVzIHRlZGlvc28geSBwb2NvIHByw6FjdGljby4gUGFyYSBlc28gc2UgdXNhIGVsIG9wZXJhZG9yICdwaXBlJyAoYCU+JWApLiAKCkxhcyBkb3Mgb3BlcmFjaW9uZXMgYW50ZXJpb3JlcyAoc2VsZWNjaW9uYXIgdHJlcyBjb2x1bW5hcyB5IGx1ZWdvIGZpbHRhciBsYXMgZmlsYXMgY29ycmVzcG9uZGllbnRlcyBhIEFyZ2VudGluYSkgc2UgcHVlZGVuIGVzY3JpYmlyIHVubyBkZXNwdcOpcyBkZWwgb3RybyB5IHNpbiBhc2lnbmFjaW9uZXMgaW50ZXJtZWRpYXMgZGUgZXN0YSBmb3JtYToKCmBgYHtyfQpwYWlzZXMgJT4lIAogIHNlbGVjdChhbmlvLCBwYWlzLCBwaWJfcGVyX2NhcGl0YSkgJT4lIAogIGZpbHRlcihwYWlzID09ICJBcmdlbnRpbmEiKQpgYGAKCkxhIGZvcm1hIGRlICJsZWVyIiBlc3RvIGVzICJUb23DoSBsYSB2YXJpYWJsZSBgcGFpc2VzYCwgKipkZXNwdcOpcyoqIGFwbGljYWxlIGBzZWxlY3QoYW5pbywgcGFpcywgcGliX3Blcl9jYXBpdGEpYCwgKipkZXNwdcOpcyoqIGFwbGljYWxlIGBmaWx0ZXIocGFpcyA9PSAiQXJnZW50aW5hIilgIi4gCgoKOjo6IHsuYWxlcnQgLmFsZXJ0LXN1Y2Nlc3N9CioqVGlwOioqCgpFbiBSU3R1ZGlvIHBvZMOpcyBlc2NyaWJpciBgJT4lYCB1c2FuZG8gZWwgYXRham8gZGUgdGVjbGFkbyBDdHIgKyBTaGlmdCBNLiDCoVByb2JhbG8hCjo6OgoKCjo6OiB7LmFsZXJ0IC5hbGVydC1pbmZvfQoqKkRlc2Fmw61vOioqCgpDb21wbGV0w6EgZXN0YSBjYWRlbmEgcGFyYSBwcm9kdWNpciB1bmEgdGFibGEgcXVlIGNvbnRlbmdhIGxvcyB2YWxvcmVzIGRlIGV4cGVjdGF0aXZhIGRlIHZpZGEsIHBhaXMgeSBhw7FvIMO6bmljYW1lbnRlIHBhcmEgbG9zIHBhw61zZXMgYWZyaWNhbm9zLiAKCmBgYHtyLCBldmFsID0gRkFMU0V9CnBhaXNlcyAlPiUgCiAgZmlsdGVyKGNvbnRpbmVudGUgPT0gX19fKSAlPiUKICBzZWxlY3QoX19fLCBfX18sIF9fXykKYGBgCgo6OjoKCiMjIEFncnVwYW5kbyB5IHJlZHVjaWVuZG8gY29uIGBncm91cF9ieSgpICU+JSBzdW1tYXJpc2UoKWAKClNpIHF1ZXLDqXMgY2FsY3VsYXIgbGEgZXhwZWN0YXRpdmEgZGUgdmlkYSBtZWRpYSBwYXJhIGNhZGEgY29udGluZW50ZSwgdGVuw6lzIHF1ZSB1c2FyIGVsIGNvbWJvIGBncm91cF9ieSgpICU+JSBzdW1tYXJpc2UoKWAuIEVzIGRlY2lyLCBwcmltZXJvIGFncnVwYXIgbGEgdGFibGEgc2Vnw7puIGxhIGNvbHVtbmEgY29udGluZW50ZSB5IGx1ZWdvIGNhbGN1bGFyIHVuIHByb21lZGlvIHBhcmEgY2FkYSBncnVwby4KClBhcmEgYWdydXBhciBsYSB0YWJsYSBwYWlzZXMgc2Vnw7puIGVsIGNvbnRpbmVudGUgdXNhbW9zIGVsIHNpZ3VpZW50ZSBjw7NkaWdvOgoKYGBge3J9CnBhaXNlcyAlPiUgCiAgZ3JvdXBfYnkoY29udGluZW50ZSkgCmBgYAoKQSBwcmltZXJhIHZpc3RhIHBhcmVjZXLDrWEgcXVlIGxhIGZ1bmNpw7NuIG5vIGhpem8gbmFkYSwgcGVybyBmaWphdGUgcXVlIGVsIHJlc3VsdGFkbyBhaG9yYSBkaWNlIHF1ZSB0aWVuZSBncnVwb3MgKCJHcm91cHM6ICIpLCB5IG5vcyBkaWNlIHF1w6kgY29sdW1uYSBlcyBsYSBxdWUgYWdydXBhIGxvcyBkYXRvcyAoImNvbnRpbmVudGUiKSB5IGN1w6FudG9zIGdydXBvcyBoYXkgKCI1IikuIExhcyBvcGVyYWNpb25lcyBzdWJzaWd1aWVudGVzIHF1ZSBsZSBoYWdhbW9zIGEgZXN0YSB0YWJsYSB2YW4gYSBoYWNlcnNlICpwYXJhIGNhZGEgZ3J1cG8qLiAKClBhcmEgdmVyIGVzdG8gZW4gYWNjacOzbiwgdXPDoSBgc3VtbWFyaXNlKClgIHBhcmEgY29tcHV0YXIgZWwgcHJvbWVkaW8gZGUgbGEgZXNwZXJhbnphIGRlIHZpZGE6CgpgYGB7cn0KcGFpc2VzICU+JSAKICBncm91cF9ieShjb250aW5lbnRlKSAlPiUgCiAgc3VtbWFyaXNlKGVzcGVyYW56YV9kZV92aWRhX21lZGlhID0gbWVhbihlc3BlcmFuemFfZGVfdmlkYSkpCmBgYAoKwqFUYWTDoSEgYHN1bW1hcmlzZSgpYCBkZXZ1ZWx2ZSB1bmEgdGFibGEgY29uIHVuYSBjb2x1bW5hIG51ZXZhLCBsbGFtYWRhICJlc3BlcmFuemFfZGVfdmlkYV9tZWRpYSIgcXVlIGNvbnRpZW5lIGVsIHByb21lZGlvIGRlIGBlc3BlcmFuemFfZGVfdmlkYWAgcGFyYSBjYWRhIGdydXBvLiBFc3RhIG9wZXJhY2nDs24gZXMgZXF1aXZhbGVudGUgYSBlc3RhIHRhYmxhIGRpbsOhbWljYSBlbiBFeGNlbDoKCjxmaWd1cmU+Cjx2aWRlbyB3aWR0aD03NzBweCBjb250cm9scz4KICA8c291cmNlIHNyYz0iaW1nL3Bpdm90LXZpZC53ZWJtIiB0eXBlPSJ2aWRlby93ZWJtIj4KPC92aWRlbz4KPC9maWd1cmU+CgpgZ3JvdXBfYnkoKWAgcGVybWl0ZSBhZ3J1cGFyIGVuIGJhc2UgYSBtw7psdGlwbGVzIGNvbHVtbmFzIHkgYHN1bW1hcmlzZSgpYCBwZXJtaXRlIGdlbmVyYXIgbcO6bHRpcGxlcyBjb2x1bW5hcyBkZSByZXN1bWVuLiBFbCBzaWd1aWVudGUgY8OzZGlnbyBjYWxjdWxhIGxhIGVzcGVyYW56YSBkZSB2aWRhIG1lZGlhIHkgc3UgZGVzdsOtbyBlc3TDoW5kYXIgcGFyYSBjYWRhIGNvbnRpbmVudGUgeSBjYWRhIGHDsW8uCgpgYGB7cn0KcGFpc2VzICU+JSAKICBncm91cF9ieShjb250aW5lbnRlLCBhbmlvKSAlPiUgCiAgc3VtbWFyaXNlKGVzcGVyYW56YV9kZV92aWRhX21lZGlhID0gbWVhbihlc3BlcmFuemFfZGVfdmlkYSksCiAgICAgICAgICAgIGVzcGVyYW56YV9kZV92aWRhX3NkID0gc2QoZXNwZXJhbnphX2RlX3ZpZGEpKQpgYGAKCkVsIHJlc3VsdGFkbyB2YSBhIHNpZW1wcmUgc2VyIHVuYSB0YWJsYSBjb24gbGEgbWlzbWEgY2FudGlkYWQgZGUgZmlsYXMgcXVlIGdydXBvcyB5IHVuYSBjYW50aWRhZCBkZSBjb2x1bW5hcyBpZ3VhbCBhIGxhIGNhbnRpZGFkIGRlIGNvbHVtbmFzIHVzYWRhcyBwYXJhIGFncnVwYXIgeSBsb3MgZXN0YWTDrXN0aWNvcyBjb21wdXRhZG9zLiAKCjo6OiB7LmFsZXJ0IC5hbGVydC1pbmZvfQoqKkRlc2Fmw61vOioqCgrCv0N1w6FsIHRlIGltYWdpbsOhcyBxdWUgdmEgYSBzZXIgZWwgcmVzdWx0YWRvIGRlbCBzaWd1aWVudGUgY8OzZGlnbz8gwr9DdcOhbnRhcyBmaWxhcyB5IGNvbHVtbmFzIHZhIGEgdGVuZXI/IChUcmF0w6EgZGUgcGVuc2FybG8gYW50ZXMgZGUgY29ycmVybG8uKQoKYGBge3IsIGV2YWwgPSBGQUxTRX0KcGFpc2VzICU+JSAKICBzdW1tYXJpc2UoZXNwZXJhbnphX2RlX3ZpZGFfbWVkaWEgPSBtZWFuKGVzcGVyYW56YV9kZV92aWRhKSkKYGBgCjo6OgoKRWwgY29tYm8gYGdyb3VwX2J5KCkgJT4lIHN1bW1hcmlzZSgpYCBzZSBwdWVkZSByZXN1bWlyIGVuIGVzdGEgZmlndXJhLiBMYXMgZmlsYXMgZGUgdW5hIHRhYmxhIHNlIGRpdmlkZW4gZW4gZ3J1cG9zLCB5IGx1ZWdvIGNhZGEgZ3J1cG8gc2UgInJlc3VtZSIgZW4gdW5hIGZpbGEgZW4gZnVuY2nDs24gZGVsIGVzdGFkw61zdGljbyB1c2Fkby4gCgohW10oaW1nL2dyb3VwX2J5LXN1bW1hcml6ZS5wbmcpCiMjIENyZWFuZG8gbnVldmFzIGNvbHVtbmFzIGNvbiBgbXV0YXRlKClgCgpUb2RvIGVzdG8gZXN0w6EgYmllbiBwYXJhIGhhY2VyIGPDoWxjdWxvcyBjb24gY29sdW1uYXMgcHJldmlhbWVudGUgZXhpc3RlbnRlcywgcGVybyBtdWNoYXMgdmVjZXMgdGVuw6lzIHF1ZSBjcmVhciBudWV2YXMgY29sdW1uYXMuIAoKTGEgdGFibGEgYHBhaXNlc2AgdGllbmUgaW5mb3JtYWNpw7NuIGRlIFBCSSBwZXIgY8OhcGl0YSB5IGRlIHBvYmxhY2nDs24sIHBvciBsbyBxdWUgZXMgcG9zaWJsZSBjb21wdXRhciBlbCBQQkkgZGUgY2FkYSBwYcOtcyBtdWx0aXBsaWNhbmRvIGxvcyB2YWxvcmVzIGRlIGVzdGFzIGNvbHVtbmFzLiBgbXV0YXRlKClgIHBlcm1pdGUgYWdyZWdhciB1bmEgbnVldmEgY29sdW1uYSBsbGFtYWRhICJwYmkiIGNvbiBlc2EgaW5mb3JtYWNpw7NuOgoKYGBge3J9CnBhaXNlcyAlPiUgCiAgbXV0YXRlKHBiaSA9IHBpYl9wZXJfY2FwaXRhKnBvYmxhY2lvbikKYGBgCgpSZWNvcmTDoSBxdWUgbGFzIGZ1bmNpb25lcyBkZSB7ZHBseXJ9IG51bmNhIG1vZGlmaWNhbiBsYSB0YWJsYSBvcmlnaW5hbC4gYG11dGF0ZSgpYCBkZXZvbHZpw7MgdW5hIG51ZXZhIHRhYmxhIHF1ZSBlcyBpZ3VhbCBhIGxhIHRhYmxhIGBwYWlzZXNgIHBlcm8gY29uIGxhIGNvbHVtbmEgInBiaSIgYWdyZWdhZGEuIExhIHRhYmxhIGBwYWlzZXNgIHNpZ3VlIGludGFjdGEuCgoKIyMgRGVzYWdydXBhbmRvIGNvbiBgdW5ncm91cCgpYAoKRW4gZ2VuZXJhbCwgbGEgbWF5b3LDrWEgZGUgbGFzIGZ1bmNpb25lcyBkZSB7ZHBseXJ9ICJlbnRpZW5kZW4iIGN1YW5kbyB1bmEgdGFibGEgZXN0w6EgYWdydXBhZGEgeSByZWFsaXphbiBsYXMgb3BlcmFjaW9uZXMgcGFyYSBjYWRhIGdydXBvLiAKCjo6OiB7LmFsZXJ0IC5hbGVydC1pbmZvfQoqKkRlc2Fmw61vOioqCgrCv0N1w6FsIGRlIGVzdG9zIGRvcyBjw7NkaWdvcyBhZ3JlZ2EgdW5hIGNvbHVtbmEgbGxhbWFkYSAicGJpX2NvbnRpbmVudGUiIGNvbiBlbCBwYmkgcHJvbWVkaW8gZGVsIGNvbnRpbmVudGUgY29ycmVzcG9uZGllbnRlIGEgY2FkYSBwYcOtcz8gwr9RdcOpIGhhY2UgZWwgb3Rybz8KCmBgYHtyLCBldmFsID0gRkFMU0V9CnBhaXNlcyAlPiUgCiAgZ3JvdXBfYnkoY29udGluZW50ZSkgJT4lIAogIG11dGF0ZShwYmlfY29udGluZW50ZSA9IG1lYW4ocGliX3Blcl9jYXBpdGEqcG9ibGFjaW9uKSkgCgpwYWlzZXMgJT4lIAogIG11dGF0ZShwYmlfY29udGluZW50ZSA9IG1lYW4ocGliX3Blcl9jYXBpdGEqcG9ibGFjaW9uKSkgCmBgYAo6OjoKCkVuIG90cmFzIHBhbGFicmFzLCBsb3MgcmVzdWx0YWRvcyBkZSBgbXV0YXRlKClgLCBgZmlsdGVyKClgLCBgc3VtbWFyaXNlKClgIHkgb3RyYXMgZnVuY2lvbmVzIGNhbWJpYW4gc2Vnw7puIHNpIGxhIHRhYmxhIGVzdMOhIGFncnVwYWRhIG8gbm8uIENvbW8gYSB2ZWNlcyB1bm8gc2UgcHVlZGUgb2x2aWRhciBxdWUgcXVlZGFyb24gZ3J1cG9zLCBlcyBjb252ZW5pZW50ZSB1c2FyIGxhIGZ1bmNpw7NuIGB1bmdyb3VwKClgIHVuYSB2ZXogcXVlIGRlasOhcyBkZSB0cmFiYWphciBjb24gZ3J1cG9zOgoKYGBge3J9CnBhaXNlcyAlPiUgCiAgZ3JvdXBfYnkoY29udGluZW50ZSkgJT4lIAogIG11dGF0ZShwYmlfY29udGluZW50ZSA9IG1lYW4ocGliX3Blcl9jYXBpdGEqcG9ibGFjaW9uKSkgJT4lIAogIHVuZ3JvdXAoKQpgYGAKCgoKCg==</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("05-dplyr-I.Rmd");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>


</body>
</html>
